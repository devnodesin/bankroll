services:
  bankroll:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: bankroll
    restart: unless-stopped
    ports:
      - "8000:80"
      - "8443:443"
    volumes:
      # Mount SQLite database file
      - ./data/database.sqlite:/bankroll/database/database.sqlite
      # Mount logs directory
      - ./data/logs:/bankroll/storage/logs
    environment:
      # Application Environment
      APP_ENV: "production"
      APP_KEY: "base64:YOUR_APP_KEY_HERE"  # Generate with: php artisan key:generate --show
      APP_DEBUG: "false"
      APP_URL: "http://localhost:8000"
      
      # Currency Configuration
      CURRENCY_SYMBOL: "â‚¹"
      
      # Application Settings
      APP_LOCALE: "en"
      APP_FALLBACK_LOCALE: "en"
      APP_FAKER_LOCALE: "en_US"
      
      # Logging
      LOG_CHANNEL: "stack"
      LOG_STACK: "single"
      LOG_LEVEL: "error"
      
      # Database Configuration (SQLite)
      DB_CONNECTION: "sqlite"
      DB_DATABASE: "/bankroll/database/database.sqlite"
    healthcheck:
      test: ["CMD", "php", "-r", "exit(0);"]
      interval: 30s
      timeout: 3s
      retries: 3
      start_period: 40s
